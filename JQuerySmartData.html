<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>data demo</title>
  <style>
    div {
      color: blue;
    }

    span {
      color: red;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>

<body>

  <div data_element="test">
    <div _value></div>
    The values stored were
    <span data_element="first"><div>{{_value}}</div></span>
    and
    <span data_element="last">{{_value}}</span>
    <button id="updateData">Update Data</button>
  </div>
</body>

<script>
  
  const smartData = require("smartData");
  // _value: "testing",
  const myData = smartData({
    test: {
      _children: {
        first: {
          _value: 20
        },
        last: {
          _value: 'pizza!'
        }
      }
    }
  })
  // const myData = smartData({test: {value: "testing", _children: {first: {value: 30}, last:{value: 'pizza!'}}}})
  myData._parsed_data.test.change("Test Again");
  myData._parsed_data.test._children.first.change(30);
  $("document").ready((e) => {
    const dataNames = Object.keys(myData);
    dataNames.forEach((dataName) => {
      const dataObject = myData._parsed_data[dataName]
      $(`[data_element=${dataName}] > *`).children([_value]).forEach((child) => {
        child.innerHTML = dataObject._value
      })
    })
    $("[data_container]").data(dataName, data()[dataName]);
    $("span").first().text($("div").data("test").first);
    $("span").last().text($("div").data("test").last);
  })
  /* $("div.update_data button#updateData").on("click", (e) => {
    $( "div" ).data( "test", { first: 16, last: "pie!" } );
    $( "span" ).first().text( $( "div" ).data( "test" ).first );
    $( "span" ).last().text( $( "div" ).data( "test" ).last );
  }) */
</script >

</html>